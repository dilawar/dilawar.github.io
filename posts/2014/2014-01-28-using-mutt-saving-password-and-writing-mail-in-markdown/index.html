<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<title>Using mutt - saving password and writing mail in markdown | Dilawar's Blog</title>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Hugo 0.89.2">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content="markdown-with-mutt,mutt">
<link rel=stylesheet type=text/css media=screen href=/css/normalize.css>
<link rel=stylesheet type=text/css media=screen href=/css/main.css>
<link rel=stylesheet type=text/css media=screen href=/css/all.css><link rel=stylesheet href=/css/katex.css crossorigin=anonymous>
<script defer src=/js/katex.js integrity=sha384-PFWG8XW41D5NzhNv5FegM1CUkw9nNLdWug8DuwnUoNEVop9n5frjcnbtsZtxTNjw crossorigin=anonymous></script>
<script defer src=/js/auto-render.js integrity=sha384-EN2q+JG5/3Z8gD7hT5WZqq+W+9wQR4P3IezfuZmGG5RkNXaaaks85seDJO7WkZlY crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<meta property="og:title" content="Using mutt - saving password and writing mail in markdown">
<meta property="og:description" content="If I were to be forced to replace my mutt with some other general purpose email client I&rsquo;d prefer thunderbird with plugin muttator.
If you prefer easy to setup and click-based tools then you will not find mutt very exciting, however those who loves to split hair and tweak their tools to their whims will find much in mutt to please them. Learning the full power of mutt takes time and some sort of persistence.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://dilawar.github.io/posts/2014/2014-01-28-using-mutt-saving-password-and-writing-mail-in-markdown/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2014-01-28T00:00:00+00:00">
<meta property="article:modified_time" content="2014-01-28T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Using mutt - saving password and writing mail in markdown">
<meta name=twitter:description content="If I were to be forced to replace my mutt with some other general purpose email client I&rsquo;d prefer thunderbird with plugin muttator.
If you prefer easy to setup and click-based tools then you will not find mutt very exciting, however those who loves to split hair and tweak their tools to their whims will find much in mutt to please them. Learning the full power of mutt takes time and some sort of persistence.">
<meta itemprop=name content="Using mutt - saving password and writing mail in markdown">
<meta itemprop=description content="If I were to be forced to replace my mutt with some other general purpose email client I&rsquo;d prefer thunderbird with plugin muttator.
If you prefer easy to setup and click-based tools then you will not find mutt very exciting, however those who loves to split hair and tweak their tools to their whims will find much in mutt to please them. Learning the full power of mutt takes time and some sort of persistence."><meta itemprop=datePublished content="2014-01-28T00:00:00+00:00">
<meta itemprop=dateModified content="2014-01-28T00:00:00+00:00">
<meta itemprop=wordCount content="527">
<meta itemprop=keywords content="markdown-with-mutt,mutt,">
</head>
<body>
<header>
<div id=titletext>
<h2 id=title><a href=https://dilawar.github.io>Dilawar's Blog</a></h2>
</div>
<div id=title-description>
<p id=subtitle>watch -n 1 /dev/null</p>
<div id=social>
<nav><ul>
<li><a href=https://github.com/dilawar><i title=Github class="icons fab fa-github"></i></a></li>
<li><a><i title="Switch Dark Mode" class="dark-mode icons fas fa-moon"></i></a></li>
</ul></nav>
</div>
</div>
<div id=mainmenu>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>All posts</a></li>
<li><a href=/about>About</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</nav>
</div>
</header>
<main>
<div class=post>
<article>
<div class=post-header>
<div class=meta>
<div class=date>
<span class=day>28</span>
<span class=rest>Jan 2014</span>
</div>
</div>
<div class=matter>
<h1 class=title>Using mutt - saving password and writing mail in markdown</h1>
<p class=post-meta>
<span class=post-meta>
</span>
</p>
</div>
</div>
<div class=markdown>
<p>If I were to be forced to replace my mutt with some other general purpose email client I&rsquo;d prefer thunderbird with plugin <code>muttator</code>.</p>
<p>If you prefer easy to setup and click-based tools then you will not find mutt very exciting, however those who loves to split hair and tweak their tools to their whims will find much in mutt to please them. Learning the full power of mutt takes time and some sort of persistence. This post is not intended for first time user. It is meant for those who have tried their hands on mutt. In the end, there are some link which can help who wants to start using mutt. I had the fleeting temptation to combine my scripts in one which can set up <a href=http://github.com/dilawar/mutt target=_blank>mutt automatically</a> for arbitrary no of accounts, but then it beats the whole purpose of tweaking the tool.</p>
<h2 id=storing-password>Storing password</h2>
<p>Mutt stores password in plain text format. To avoid this, I used <code>gpg</code> to encrypt a file in which password are stored. For example, a simple text file is created to store the password.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>export EE_NAME=&#34;Dilawar Singh&#34;
export EE_USER=dilawar
export EE_PASS=password1
</code></pre></div><p>This has export command which set an environment variable. Now I encrypt the file using <code>gpg</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>gpd -c password.txt
</code></pre></div><p>It will ask for a pass-phrase. When decrypting the file, you have provide the same pass-phrase. Passphrase are easy to remember and hard to crack. If I were Gabbar Singh, I would have chose something like <code>thakur a per katne chahiye the</code>. Hard to guess and easy to remember, isn&rsquo;t it? An encrypted file will be created by gpg default name <code>password.txt.gpg</code>. Mutt can read environment variables, let&rsquo;s exploit this fact. We write a wrapper around the mutt command. Let&rsquo;s name this script <code>my_mutt</code> or after the name of your pet doggie. And <code>chmod +x my_mutt</code> so it is executable. Store it somewhere like <code>/usr/local/bin</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#579>#!/bin/bash
</span><span style=color:#579></span><span style=color:#963>pwds</span><span style=color:#333>=</span>gpg -d ~/.mutt/password.txt.gpg
<span style=color:#007020>eval</span> <span style=color:#963>$pwds</span>
mutt -F ~/.mutt/mutt_server <span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$@</span><span style=background-color:#fff0f0>&#34;</span>
</code></pre></div><p>Second line de-crypt the encrypted file, text of the file is stored in <code>pwds</code> variable (valid mutt configuration lines) and this text is executed by <code>eval</code> command. We invoke mutt in this shell so that it can access environment variables EE_USER, EE_PASS etc. On line 4, <code>-F ~/.mutt/mutt_server</code> says that this file is my config file which mutt should read. The default configuration file is <code>~/.muttrc</code>.</p>
<p>In the configuration file, write something like this. You need to write some more to setup mutt. This is only fragment which is relevant to one account.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#888># ~/Scripts/mutt/ee</span>
<span style=color:#007020>set</span> <span style=color:#963>from</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$EE_NAME</span><span style=background-color:#fff0f0> </span><span style=color:#963>$EE_USER</span><span style=background-color:#fff0f0>@ee.iitb.ac.in&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>hostname</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;imaps://sandesh.ee.iitb.ac.in&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>folder</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;imaps://sandesh.ee.iitb.ac.in&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>imap_user</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$EE_USER</span><span style=background-color:#fff0f0>&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>imap_pass</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$EE_PASS</span><span style=background-color:#fff0f0>&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>record</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;+mail/Sent&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>postponed</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;=Drafts&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>spoolfile</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;imaps://sandesh.ee.iitb.ac.in/INBOX&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>signature</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;sign.txt&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>smtp_url</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;smtp://</span><span style=color:#963>$GPO_USER</span><span style=background-color:#fff0f0>@smtp-auth.iitb.ac.in:25&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>stmp_pass</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$GPO_PASS</span><span style=background-color:#fff0f0>&#34;</span>
<span style=color:#007020>set</span> <span style=color:#963>realname</span><span style=color:#333>=</span><span style=background-color:#fff0f0>&#34;</span><span style=color:#963>$REAL_NAME</span><span style=background-color:#fff0f0>&#34;</span>
my_hdr Organization: EE, IIT Bombay, http://www.ee.iitb.ac.in
</code></pre></div><p>In my personal opinion, this is a good solution to store password on a machine (don&rsquo;t commit your encrypted file to your Github/Gitlab repo.)</p>
<h2 id=writing-html-emails>Writing HTML emails</h2>
<p>Mutt works great with text emails. But if you want to write emails for wncc group where code has to be written inline, html can help. See this question for potential solutions. <a href=http://unix.stackexchange.com/questions/108485/send-email-written-in-markdown-using-mutt target=_blank>I have also written mine</a>.</p>
<h2 id=resources>Resources:</h2>
<ol>
<li>Mutt wiki is a good reference guide.</li>
<li><a href=http://mutt.blackfish.org.uk/storage/ target=_blank>My first mutt</a></li>
<li><a href=http://wcm1.web.rice.edu/mutt-tips.html target=_blank>And this terminal lover blog</a></li>
</ol>
</div>
<div class=tags>
<div class=taxosfloating_left>
<p>Categories</p>
</div>
<div class=termsfloating_right>
<p>
<a href=/categories/utility/>utility</a>
</p>
</div>
<div class=clearit></div>
<div class=tags>
<div class=taxosfloating_left>
<p>Tags</p>
</div>
<div class=termsfloating_right>
<p>
<a href=/tags/markdown-with-mutt/>markdown-with-mutt</a>
<a href=/tags/mutt/>mutt</a>
</p>
</div>
<div class=clearit></div>
</div>
</article>
</div>
</main>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-180197482-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/dark-mode.js></script>
</body>
</html>