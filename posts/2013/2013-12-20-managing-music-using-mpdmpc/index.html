<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<title>Managing music using mpd/mpc | Dilawar's Blog</title>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Hugo 0.89.2">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content="advanced-linux-sound-architecture,mpc,mpd,music-player-daemon">
<link rel=stylesheet type=text/css media=screen href=/css/normalize.css>
<link rel=stylesheet type=text/css media=screen href=/css/main.css>
<link rel=stylesheet type=text/css media=screen href=/css/all.css><link rel=stylesheet href=/css/katex.css crossorigin=anonymous>
<script defer src=/js/katex.js integrity=sha384-PFWG8XW41D5NzhNv5FegM1CUkw9nNLdWug8DuwnUoNEVop9n5frjcnbtsZtxTNjw crossorigin=anonymous></script>
<script defer src=/js/auto-render.js integrity=sha384-EN2q+JG5/3Z8gD7hT5WZqq+W+9wQR4P3IezfuZmGG5RkNXaaaks85seDJO7WkZlY crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<meta property="og:title" content="Managing music using mpd/mpc">
<meta property="og:description" content="Music Player Daemon (MPD) is a lightweight application. It hardly takes any cpu. Moreover it runs in background and does not clutter and workspace. If you dont use mouse frequently or wants to avoid it (programmers use keyboard), then mpd is for you. It is one of those applications which does one job at a time and does it really well (well, if you get is working once which is not very hard).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://dilawar.github.io/posts/2013/2013-12-20-managing-music-using-mpdmpc/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2013-12-20T00:00:00+00:00">
<meta property="article:modified_time" content="2013-12-20T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Managing music using mpd/mpc">
<meta name=twitter:description content="Music Player Daemon (MPD) is a lightweight application. It hardly takes any cpu. Moreover it runs in background and does not clutter and workspace. If you dont use mouse frequently or wants to avoid it (programmers use keyboard), then mpd is for you. It is one of those applications which does one job at a time and does it really well (well, if you get is working once which is not very hard).">
<meta itemprop=name content="Managing music using mpd/mpc">
<meta itemprop=description content="Music Player Daemon (MPD) is a lightweight application. It hardly takes any cpu. Moreover it runs in background and does not clutter and workspace. If you dont use mouse frequently or wants to avoid it (programmers use keyboard), then mpd is for you. It is one of those applications which does one job at a time and does it really well (well, if you get is working once which is not very hard)."><meta itemprop=datePublished content="2013-12-20T00:00:00+00:00">
<meta itemprop=dateModified content="2013-12-20T00:00:00+00:00">
<meta itemprop=wordCount content="875">
<meta itemprop=keywords content="advanced-linux-sound-architecture,mpc,mpd,music-player-daemon,">
</head>
<body>
<header>
<div id=titletext>
<h2 id=title><a href=https://dilawar.github.io>Dilawar's Blog</a></h2>
</div>
<div id=title-description>
<p id=subtitle>watch -n 1 /dev/null</p>
<div id=social>
<nav><ul>
<li><a href=https://github.com/dilawar><i title=Github class="icons fab fa-github"></i></a></li>
<li><a><i title="Switch Dark Mode" class="dark-mode icons fas fa-moon"></i></a></li>
</ul></nav>
</div>
</div>
<div id=mainmenu>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>All posts</a></li>
<li><a href=/about>About</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</nav>
</div>
</header>
<main>
<div class=post>
<article>
<div class=post-header>
<div class=meta>
<div class=date>
<span class=day>20</span>
<span class=rest>Dec 2013</span>
</div>
</div>
<div class=matter>
<h1 class=title>Managing music using mpd/mpc</h1>
<p class=post-meta>
<span class=post-meta>
</span>
</p>
</div>
</div>
<div class=markdown>
<p><em>Music Player Daemon</em> (MPD) is a lightweight application. It hardly takes any cpu. Moreover it runs in background and does not clutter and workspace. If you dont use mouse frequently or wants to avoid it (programmers use keyboard), then mpd is for you. It is one of those applications which does one job at a time and does it really well (well, if you get is working once which is not very hard). The job of MPD is to read/decode audio files available in its music directory on demand (one can specify it in config file) and create sound. It them make sound available to user using <a href=http://www.alsa-project.org title="Advanced Linux Sound Architecture" target=_blank>ALSA</a> (or some other) soundcard driver. How to setup MPD is explained nicely on arch-linux wiki (gentoo wiki should also have something) otherwise there is some help always available on <a href=http://unix.stackexchange.com target=_blank>http://unix.stackexchange.com</a> or <a href=http://superuser.stackexchange.com target=_blank>http://superuser.stackexchange.com</a>. Here is my config file stored as ~/.mpd/mpdconf. All of my music is kept in/download to <code>~/Bhandar/Music</code> .</p>
<p>A minimal example for mpdconf file which works on my system.</p>
<p>On ubuntu, if you install mpd, a file is automatically created in /etc/mpd.conf. You can edit this file also. You have to create some paths before you can continue, if you create a config file like mine.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $ mkdir -p ~/.mpd/playlists
 $ touch ~/.mpd/playlists 
</code></pre></div><p>Now type mpd in terminal, if it starts without any messages then we are good to go. Sometimes, you might get this warning. Failed to bind to &lsquo;<a href=http://127.0.0.1:6600 target=_blank>127.0.0.1:6600</a>': Address already in use. This means mpd is already running. Check the running process</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $ ps -e | grep mpd
 14073 ?    00:00:28 mpd 
</code></pre></div><p>Terminate it,</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $ sudo pkill mpd
 $ sudo pkill mpd 
</code></pre></div><p>or</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ sudo kill -9 14073
$ sudo kill -9 14073
</code></pre></div><p>Check again.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $ ps -e | grep mpd
 $ ps -e | grep mpd 
</code></pre></div><p>This time we should have an empty line. Run mpd again. If there is a problem, then time to ask people or debug by yourself.</p>
<h2 id=music-player-client-mpc>Music player client (MPC)</h2>
<p>Now we need a client to send commands to mpd. MPC is a command line tool (perl scripts) while gmpc is a gui-based client. Mind you, mpd does not have those advance features of rythmbox and bashee. If you like to use amplifier and other fancy feature to enhance the sound, there is no point reading further. The very first thing we need to do, it to update database.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $ mpc -h gabbar@localhost update
 Updating DB (#1) ... 
</code></pre></div><p>Password &lsquo;gabbar&rsquo; was given in conf file. Without it, we will not have access to update the database. Check what password you have given and see the results. This much we need to do only once.</p>
<h2 id=creating-playlists-and-playing-them>Creating playlists and playing them</h2>
<p>`mpc help` command will show you how to search for songs and add them to playlist. I woluld suggest to learn it the hard way. I have written few scripts to make my life slightly easier (short term memory losses). Script [1] does search for a given word in an of songs and add them all matched songs.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $./mpc_search_add.sh &#34;bhimsen joshi&#34;
 $./mpc_search_add.sh &#34;bhimsen joshi&#34; 
</code></pre></div><p>It will add songs having &lsquo;bhimsen joshi&rsquo; in their metadata, if they are not already added. Another common problem is to play the fav song quickly. There is script [3] for this also. For instance if I want to listen to &ldquo;Yellow, Cold play&rdquo; then I do the following.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $./mpc_play &#34;yellow&#34;
 [INFO] Searching for yellow
 [INFO] No song found for your query. 
</code></pre></div><p>Ok, yellow is not found that means it is not added to playlist. Use script 2 to add &ldquo;Coldplay&rdquo; to playlist. Menwhile, lets play a song which I am pretty sure of having in my playlist: &lsquo;Seene main jalan&rsquo;. It will play the first match.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> #./mpc_play &#34;seene&#34;
 [INFO] A matching song is found in playlist at 1911
 Seene main jalan - Gaman.mp3
 [playing] #1911/1911  0:00/4:30 (0%) volume:100%  repeat: on  random: on  single: off  consume: off 
</code></pre></div><p>Depending on size of playlist, this might take 1-3 seconds. Next, previous,</p>
<h2 id=playpause-and-volume>Play/pause and volume</h2>
<p>MPC comes with standard command to do them <code>mpc next</code>, <code>mpc previous</code>, <code>mpc toggle</code> etc etc. Each windown manager allows key mapping. Map these commands to some key combination. I use <code>Alt+Ctlr+&lt;some_key></code> for user defined commands.</p>
<h2 id=deleting-currently-playing-song-or-adding-it-to-favs>Deleting currently playing song or adding it to favs</h2>
<p>A lot of songs gets downloaded and once in a while suddenly some random guy starting singing about somebodys butt and breasts. Who wants such sort of non-sense in ones playlist :-p. Sometimes a great songs appears and you wish to add it to your a folder. Script [2] does both of these functions. This acts on currently playing song. If you path to music_dir is different than mine, then you have to change the paths accordingly. To delete currently playing song</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $./manage_mpc.sh -d 
</code></pre></div><p>To add the song to a folder of gems <code>~/Bhandar/Music/MyCollection</code></p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback> $./manage_mpc.sh -a 
</code></pre></div><p>You can bind these two commands to some keys. The important thing is that these scripts must be executable (<code>chmod +x scipt_name</code>) and available in system path (copy them to <code>/usr/local/bin</code> ). Script [4] provides color-support in terminal which is needed for other scripts to work. It should be in the same folder as other scripts. One can use it for other purposes. Everyone loves colors.</p>
<p>[1][https://raw.github.com/dilawar/Scripts/master/mpc_search_add.sh](<a href=https://raw.github.com/dilawar/Scripts/master/mpc target=_blank>https://raw.github.com/dilawar/Scripts/master/mpc</a>_search_add.sh) [2][https://raw.github.com/dilawar/Scripts/master/manage_mpc.sh](<a href=https://raw.github.com/dilawar/Scripts/master/manage target=_blank>https://raw.github.com/dilawar/Scripts/master/manage</a>_mpc.sh) [3][https://raw.github.com/dilawar/Scripts/master/manage_play.sh](<a href=https://raw.github.com/dilawar/Scripts/master/mpc target=_blank>https://raw.github.com/dilawar/Scripts/master/mpc</a>_play.sh) [4][https://raw.github.com/dilawar/Scripts/master/colors.sh](<a href=https://raw.github.com/dilawar/Scripts/master/colors.sh target=_blank>https://raw.github.com/dilawar/Scripts/master/colors.sh</a>)</p>
</div>
<div class=tags>
<div class=taxosfloating_left>
<p>Tags</p>
</div>
<div class=termsfloating_right>
<p>
<a href=/tags/advanced-linux-sound-architecture/>advanced-linux-sound-architecture</a>
<a href=/tags/mpc/>mpc</a>
<a href=/tags/mpd/>mpd</a>
<a href=/tags/music-player-daemon/>music-player-daemon</a>
</p>
</div>
<div class=clearit></div>
</div>
</article>
</div>
</main>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-180197482-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/dark-mode.js></script>
</body>
</html>